export interface Event {
    id: string;
    name: string;
    heroImage: string;
    date: string;
    time: string;
    venue: string;
    neighborhood: string;
    latitude: number;
    longitude: number;
    segment: string;
    genre: string;
    ticketUrl: string;
    price?: string;
    // Enhanced fields
    description?: string;
    distance?: number; // in miles
    travelTime?: number; // in minutes
    tags?: string[];
    priceLevel?: "free" | "$" | "$$" | "$$$";
    isRecommended?: boolean;
    recommendationScore?: number;
    recommendationReasons?: string[];
    isTrending?: boolean;
    trendingRank?: number;
    happeningNow?: boolean;
    isTonight?: boolean;
  }
  
  // export const events: Event[] = [
  //   {
  //     id: "1",
  //     name: "Taylor Swift | The Eras Tour",
  //     heroImage: "https://images.unsplash.com/photo-1540039155733-5bb30b53aa14?w=800&q=80",
  //     date: "Dec 28, 2024",
  //     time: "7:00 PM",
  //     venue: "Madison Square Garden",
  //     neighborhood: "Midtown",
  //     latitude: 40.7505,
  //     longitude: -73.9934,
  //     segment: "Music",
  //     genre: "Pop",
  //     ticketUrl: "#",
  //     price: "$150+",
  //     description: "Experience the phenomenon that is The Eras Tour. Taylor Swift takes you on a journey through all her musical eras with stunning visuals, incredible performances, and unforgettable moments.",
  //     distance: 0.8,
  //     travelTime: 12,
  //     tags: ["concert", "pop", "indoor", "iconic"],
  //     priceLevel: "$$$",
  //     isRecommended: true,
  //     recommendationScore: 95,
  //     recommendationReasons: ["Matches your music taste", "Popular with your friends", "High-energy event"],
  //     isTrending: true,
  //     trendingRank: 1,
  //     isTonight: true,
  //   },
  //   {
  //     id: "2",
  //     name: "Brooklyn Nets vs Lakers",
  //     heroImage: "https://images.unsplash.com/photo-1504450758481-7338bbe75c8e?w=800&q=80",
  //     date: "Dec 29, 2024",
  //     time: "8:30 PM",
  //     venue: "Barclays Center",
  //     neighborhood: "Brooklyn",
  //     latitude: 40.6826,
  //     longitude: -73.9754,
  //     segment: "Sports",
  //     genre: "Basketball",
  //     ticketUrl: "#",
  //     price: "$85+",
  //     description: "Watch the Brooklyn Nets take on the Los Angeles Lakers in this exciting NBA matchup. Experience world-class basketball in one of NYC's premier arenas.",
  //     distance: 2.4,
  //     travelTime: 25,
  //     tags: ["sports", "basketball", "indoor", "nba"],
  //     priceLevel: "$$",
  //     isRecommended: true,
  //     recommendationScore: 88,
  //     recommendationReasons: ["You attended similar events", "Fits your evening schedule"],
  //     isTrending: true,
  //     trendingRank: 3,
  //   },
  //   {
  //     id: "3",
  //     name: "Hamilton - Broadway",
  //     heroImage: "https://images.unsplash.com/photo-1507676184212-d03ab07a01bf?w=800&q=80",
  //     date: "Dec 30, 2024",
  //     time: "2:00 PM",
  //     venue: "Richard Rodgers Theatre",
  //     neighborhood: "Times Square",
  //     latitude: 40.7590,
  //     longitude: -73.9845,
  //     segment: "Arts",
  //     genre: "Musical",
  //     ticketUrl: "#",
  //     price: "$200+",
  //     description: "The revolutionary musical that took Broadway by storm. Hamilton tells the story of America's Founding Father Alexander Hamilton through hip-hop, jazz, blues, R&B, and Broadway.",
  //     distance: 1.2,
  //     travelTime: 15,
  //     tags: ["theater", "musical", "broadway", "cultural"],
  //     priceLevel: "$$$",
  //     isTrending: true,
  //     trendingRank: 2,
  //   },
  //   {
  //     id: "4",
  //     name: "Disclosure DJ Set",
  //     heroImage: "https://images.unsplash.com/photo-1571266028243-d220c6a89596?w=800&q=80",
  //     date: "Dec 31, 2024",
  //     time: "10:00 PM",
  //     venue: "Brooklyn Mirage",
  //     neighborhood: "Brooklyn",
  //     latitude: 40.7128,
  //     longitude: -73.9341,
  //     segment: "Music",
  //     genre: "Electronic",
  //     ticketUrl: "#",
  //     price: "$75+",
  //     description: "Ring in the New Year with Disclosure's legendary DJ set. An outdoor electronic music experience under the stars at Brooklyn's premier venue.",
  //     distance: 3.1,
  //     travelTime: 35,
  //     tags: ["nightlife", "electronic", "outdoor", "nye"],
  //     priceLevel: "$$",
  //     isRecommended: true,
  //     recommendationScore: 92,
  //     recommendationReasons: ["Perfect for NYE", "Matches your music preferences", "Outdoor venue you love"],
  //   },
  //   {
  //     id: "5",
  //     name: "NY Knicks vs Celtics",
  //     heroImage: "https://images.unsplash.com/photo-1546519638-68e109498ffc?w=800&q=80",
  //     date: "Jan 2, 2025",
  //     time: "7:30 PM",
  //     venue: "Madison Square Garden",
  //     neighborhood: "Midtown",
  //     latitude: 40.7505,
  //     longitude: -73.9934,
  //     segment: "Sports",
  //     genre: "Basketball",
  //     ticketUrl: "#",
  //     price: "$120+",
  //     description: "The rivalry continues! Watch the New York Knicks face off against the Boston Celtics in this classic Eastern Conference showdown at The World's Most Famous Arena.",
  //     distance: 0.8,
  //     travelTime: 12,
  //     tags: ["sports", "basketball", "indoor", "rivalry"],
  //     priceLevel: "$$$",
  //     isTrending: true,
  //     trendingRank: 4,
  //   },
  //   {
  //     id: "6",
  //     name: "Van Gogh: The Immersive Experience",
  //     heroImage: "https://images.unsplash.com/photo-1578926288207-a90a5366759d?w=800&q=80",
  //     date: "Jan 3, 2025",
  //     time: "11:00 AM",
  //     venue: "Pier 36",
  //     neighborhood: "Lower East Side",
  //     latitude: 40.7112,
  //     longitude: -73.9847,
  //     segment: "Arts",
  //     genre: "Exhibition",
  //     ticketUrl: "#",
  //     price: "$45+",
  //     description: "Step inside Van Gogh's masterpieces in this stunning 360-degree digital art exhibition. Walk through Starry Night, Sunflowers, and more iconic works.",
  //     distance: 1.8,
  //     travelTime: 20,
  //     tags: ["art", "exhibition", "immersive", "cultural"],
  //     priceLevel: "$$",
  //     isRecommended: true,
  //     recommendationScore: 85,
  //     recommendationReasons: ["Great for a chill day", "Highly rated by visitors", "Indoor activity"],
  //   },
  //   {
  //     id: "7",
  //     name: "Fred Again.. Live",
  //     heroImage: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80",
  //     date: "Jan 5, 2025",
  //     time: "8:00 PM",
  //     venue: "Terminal 5",
  //     neighborhood: "Hell's Kitchen",
  //     latitude: 40.7679,
  //     longitude: -73.9923,
  //     segment: "Music",
  //     genre: "Electronic",
  //     ticketUrl: "#",
  //     price: "$95+",
  //     description: "British producer Fred Again.. brings his emotional electronic soundscapes to Terminal 5. Known for his viral sampling and heartfelt productions.",
  //     distance: 1.5,
  //     travelTime: 18,
  //     tags: ["concert", "electronic", "indoor", "viral"],
  //     priceLevel: "$$",
  //     isTrending: true,
  //     trendingRank: 5,
  //   },
  //   {
  //     id: "8",
  //     name: "NY Rangers vs Devils",
  //     heroImage: "https://images.unsplash.com/photo-1580748142459-e63c88b92c07?w=800&q=80",
  //     date: "Jan 6, 2025",
  //     time: "7:00 PM",
  //     venue: "Madison Square Garden",
  //     neighborhood: "Midtown",
  //     latitude: 40.7505,
  //     longitude: -73.9934,
  //     segment: "Sports",
  //     genre: "Hockey",
  //     ticketUrl: "#",
  //     price: "$90+",
  //     description: "The Hudson River Rivalry heats up as the NY Rangers battle the New Jersey Devils. One of the most intense matchups in NHL history.",
  //     distance: 0.8,
  //     travelTime: 12,
  //     tags: ["sports", "hockey", "indoor", "rivalry"],
  //     priceLevel: "$$",
  //   },
  //   {
  //     id: "9",
  //     name: "Sleep No More",
  //     heroImage: "https://images.unsplash.com/photo-1503095396549-807759245b35?w=800&q=80",
  //     date: "Jan 8, 2025",
  //     time: "7:30 PM",
  //     venue: "McKittrick Hotel",
  //     neighborhood: "Chelsea",
  //     latitude: 40.7448,
  //     longitude: -74.0047,
  //     segment: "Arts",
  //     genre: "Theater",
  //     ticketUrl: "#",
  //     price: "$130+",
  //     description: "The groundbreaking immersive theater experience where you explore a mysterious hotel and follow characters through a reimagined Macbeth.",
  //     distance: 2.1,
  //     travelTime: 22,
  //     tags: ["theater", "immersive", "unique", "cultural"],
  //     priceLevel: "$$$",
  //     isRecommended: true,
  //     recommendationScore: 90,
  //     recommendationReasons: ["Unique experience", "Highly rated", "Perfect for adventurous types"],
  //   },
  //   {
  //     id: "10",
  //     name: "Kendrick Lamar | GNX Tour",
  //     heroImage: "https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800&q=80",
  //     date: "Jan 10, 2025",
  //     time: "8:00 PM",
  //     venue: "Barclays Center",
  //     neighborhood: "Brooklyn",
  //     latitude: 40.6826,
  //     longitude: -73.9754,
  //     segment: "Music",
  //     genre: "Hip-Hop",
  //     ticketUrl: "#",
  //     price: "$175+",
  //     description: "Pulitzer Prize-winning artist Kendrick Lamar brings his highly anticipated GNX Tour to Brooklyn. An unforgettable night of groundbreaking hip-hop.",
  //     distance: 2.4,
  //     travelTime: 25,
  //     tags: ["concert", "hip-hop", "indoor", "iconic"],
  //     priceLevel: "$$$",
  //     isTrending: true,
  //     trendingRank: 6,
  //   },
  //   {
  //     id: "11",
  //     name: "Blue Note Jazz Night",
  //     heroImage: "https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=800&q=80",
  //     date: "Jan 12, 2025",
  //     time: "9:00 PM",
  //     venue: "Blue Note Jazz Club",
  //     neighborhood: "Greenwich Village",
  //     latitude: 40.7308,
  //     longitude: -74.0006,
  //     segment: "Music",
  //     genre: "Jazz",
  //     ticketUrl: "#",
  //     price: "$35+",
  //     description: "Experience authentic jazz at NYC's legendary Blue Note. Intimate setting, world-class musicians, and the soul of Greenwich Village.",
  //     distance: 1.0,
  //     travelTime: 14,
  //     tags: ["jazz", "nightlife", "intimate", "cultural"],
  //     priceLevel: "$",
  //     isRecommended: true,
  //     recommendationScore: 82,
  //     recommendationReasons: ["Affordable option", "Close to you", "Perfect evening vibe"],
  //   },
  //   {
  //     id: "12",
  //     name: "Comedy Cellar: All-Stars",
  //     heroImage: "https://images.unsplash.com/photo-1527224538127-2104bb71c51b?w=800&q=80",
  //     date: "Dec 20, 2024",
  //     time: "9:30 PM",
  //     venue: "Comedy Cellar",
  //     neighborhood: "Greenwich Village",
  //     latitude: 40.7300,
  //     longitude: -74.0002,
  //     segment: "Arts",
  //     genre: "Comedy",
  //     ticketUrl: "#",
  //     price: "$25+",
  //     description: "The legendary Comedy Cellar hosts its All-Stars night featuring surprise appearances from NYC's best comedians and occasional celebrity drop-ins.",
  //     distance: 1.0,
  //     travelTime: 14,
  //     tags: ["comedy", "nightlife", "intimate", "entertainment"],
  //     priceLevel: "$",
  //     happeningNow: true,
  //     isTonight: true,
  //   },
  //   {
  //     id: "13",
  //     name: "Central Park Ice Skating",
  //     heroImage: "https://images.unsplash.com/photo-1544723795-3fb6469f5b39?w=800&q=80",
  //     date: "Dec 20, 2024",
  //     time: "All Day",
  //     venue: "Wollman Rink",
  //     neighborhood: "Central Park",
  //     latitude: 40.7678,
  //     longitude: -73.9743,
  //     segment: "Arts",
  //     genre: "Exhibition",
  //     ticketUrl: "#",
  //     price: "Free",
  //     description: "Glide across the ice at Central Park's iconic Wollman Rink. Stunning views of the Manhattan skyline make this a magical winter experience.",
  //     distance: 0.5,
  //     travelTime: 8,
  //     tags: ["outdoor", "winter", "family", "free"],
  //     priceLevel: "free",
  //     happeningNow: true,
  //     isTonight: true,
  //     isRecommended: true,
  //     recommendationScore: 94,
  //     recommendationReasons: ["Free entry", "10 minutes away", "Perfect weather today"],
  //   },
  // ];
  
  export const segments = ["All", "Music", "Sports", "Arts"];
  
  export const genres = [
    "All",
    "Pop",
    "Electronic",
    "Hip-Hop",
    "Jazz",
    "Basketball",
    "Hockey",
    "Musical",
    "Theater",
    "Exhibition",
    "Comedy",
  ];
  
  export const priceLevels = ["All", "Free", "$", "$$", "$$$"];
  
  export const timeFilters = ["All", "Now", "Tonight", "This Weekend", "This Week"];
  
  export const distanceOptions = [1, 2, 3, 5, 10, 25];
  
  export const moods = [
    { id: "adventurous", label: "Adventurous", icon: "ðŸš€", description: "Unique, immersive experiences" },
    { id: "chill", label: "Chill", icon: "â˜•", description: "Relaxed, low-key activities" },
    { id: "social", label: "Social", icon: "ðŸŽ‰", description: "Great for groups and meeting people" },
    { id: "artsy", label: "Artsy", icon: "ðŸŽ¨", description: "Cultural and creative events" },
  ];
  


// export async fetcher
import { supabase } from "../lib/supabase";
 
export async function fetchEvents(): Promise<Event[]> {
  const { data, error } = await supabase
    .from("events")
    .select("*")
    .order("date", { ascending: true });
  console.log("Supabase fetchEvents data:", data, "error:", error);
  if (error) throw error;
  return (data ?? []).map((e: any) => ({
    id: e.id,
    name: e.name,
    heroImage: e.hero_image || e.heroImage || "",
    date: e.date,
    time: e.time,
    venue: e.venue,
    neighborhood: e.neighborhood,
    latitude: e.latitude,
    longitude: e.longitude,
    segment: e.segment,
    genre: e.genre,
    ticketUrl: e.ticket_url || e.ticketUrl || "",
    price: e.price,
    description: e.description,
    distance: e.distance ?? 1,
    travelTime: e.travel_time ?? e.travelTime ?? 10,
    tags: e.tags ?? [],
    priceLevel: e.price_level ?? e.priceLevel ?? "$", // <-- use snake_case first
    isRecommended: e.is_recommended ?? e.isRecommended ?? false,
    recommendationScore: e.recommendation_score ?? e.recommendationScore ?? 0,
    recommendationReasons: e.recommendation_reasons ?? e.recommendationReasons ?? [],
    isTrending: e.is_trending ?? e.isTrending ?? false,
    trendingRank: e.trending_rank ?? e.trendingRank ?? 0,
    happeningNow: e.happening_now ?? e.happeningNow ?? false,
    isTonight: e.is_tonight ?? e.isTonight ?? false,
  }));
}